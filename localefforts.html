<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>San Diego Local Efforts</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
        }

        .search-container, .filter-container {
            margin-bottom: 20px;
        }

        .efforts-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
        }

        .effort {
            width: 30%;
            margin-bottom: 20px;
            text-align: center;
        }

        .effort img {
            width: 100%;
            cursor: pointer;
        }

        .pagination {
            margin-top: 20px;
            text-align: center;
        }

        .pagination button {
            margin: 5px;
            padding: 10px 15px;
            cursor: pointer;
        }
    </style>
</head>
<body>

    <h1>Local Efforts</h1>

    <!-- Search bar -->
    <div class="search-container">
        <input type="text" id="searchInput" placeholder="Search for an effort..." onkeyup="filterEfforts()">
    </div>

    <!-- Filter bar -->
    <div class="filter-container">
        <label for="categoryFilter">Filter by Category:</label>
        <select id="categoryFilter" onchange="filterEfforts()">
            <option value="">All</option>
            <option value="Climate">Climate</option>
            <option value="Environmental Justice">Environmental Justice</option>
            <option value="Wildlife">Wildlife</option>
            <option value="Ocean Preservation">Ocean Preservation</option>
        </select>
    </div>

    <!-- Efforts container -->
    <div class="efforts-container" id="effortsContainer">
        <!-- Effort items will be dynamically inserted here -->
    </div>

    <!-- Pagination -->
    <div class="pagination">
        <button onclick="navigate(-1)">Previous</button>
        <button onclick="navigate(1)">Next</button>
    </div>

    <script>
        // Define the efforts with categories
        const allEfforts = [
            { name: "Climate Action Campaign", image: "effort1.jpg", link: "https://www.climateactioncampaign.org/", category: "Climate" },
            { name: "San Diego Bird Alliance", image: "effort2.jpg", link: "https://www.sandiegobirdalliance.org/what-we-do/overview.html#:~:text=Our%20work%20We%20seek%20to%20shape%20a,appreciating%20our%20local%20wildlife%20and%20their%20habitats.", category: "Wildlife" },
            { name: "San Diego Zoo Wildlife Alliance", image: "effort3.jpg", link: "https://www.islands.com/1636405/best-zoos-america-reviews/#:~:text=The%20San%20Diego%20Zoo%20Wildlife%20Alliance%20is,to%20climate%20change%2C%20and%20protect%20endangered%20animals.", category: "Wildlife" },
            { name: "Surfrider Foundation San Diego County", image: "effort4.jpg", link: "https://sandiego.surfrider.org/", category: "Ocean Preservation" },
            { name: "Environmental Health Coalition", image: "effort5.jpg", link: "https://www.environmentalhealth.org/index.php/en/where-we-work/san-diego-region", category: "Environmental Justice" },
            { name: "SanDiego350", image: "effort6.jpg", link: "https://sandiego350.org/", category: "Climate" },
            { name: "San Dieguito River Park Conservancy", image: "effort7.jpg", link: "https://sdrvc.org/", category: "Environmental Justice" },
            { name: "California Native Plant Society, San Diego Chapter", image: "effort8.jpg", link: "https://www.cnpssd.org/", category: "Environmental Justice" },
            { name: "San Diego Coastkeeper", image: "effort9.jpg", link: "https://www.sdcoastkeeper.org/", category: "Ocean Preservation" },
            { name: "San Diego Audubon Society", image: "effort10.jpg", link: "https://www.sandiegoaudubon.org/ ", category: "Wildlife" },
            { name: "Chaparral Lands Conservancy", image: "effort11.jpg", link: "https://www.chaparralconservancy.org/", category: "Environmental Justice" },
            { name: "Sierra Club San Diego", image: "effort12.jpg", link: "http://sandiegosierraclub.org/ ", category: "Environmental Justice" },
            { name: "San Diego Rivee Park Foundation", image: "effort13.jpg", link: "https://sandiegoriver.org/", category: "Ocean Preservation" },
            { name: "River Park Foundation", image: "effort14.jpg", link: "https://sandiegoriver.org/ ", category: "Community" },
            { name: "San Diego Canyonlands", image: "effort15.jpg", link: "https://www.sdcanyonlands.org/", category: "Environmental Justice" },
            { name: "San Diego Habitat Conservancy", image: "effort16.jpg", link: "https://www.sdhabitat.org/", category: "Environmental Justice" },
            { name: "San Diego Green New Deal", image: "effort17.jpg", link: "https://www.greennewdealsd.org/", category: "Climate" },
            { name: "Wildcoast", image: "effort18.jpg", link: "https://wildcoast.org/", category: "Climate" }

        ];

        let currentPage = 1;
        const itemsPerPage = 9;  // Updated to 9 per page

        // Display efforts based on the current page and filter conditions
        function displayEfforts() {
            const searchInput = document.getElementById('searchInput').value.toLowerCase();
            const selectedCategory = document.getElementById('categoryFilter').value;
            
            const filteredEfforts = allEfforts.filter(effort => {
                const matchesSearch = effort.name.toLowerCase().includes(searchInput);
                const matchesCategory = !selectedCategory || effort.category === selectedCategory;
                return matchesSearch && matchesCategory;
            });

            const startIndex = (currentPage - 1) * itemsPerPage;
            const endIndex = startIndex + itemsPerPage;
            const pageEfforts = filteredEfforts.slice(startIndex, endIndex);

            const container = document.getElementById('effortsContainer');
            container.innerHTML = ''; // Clear the container

            pageEfforts.forEach(effort => {
                const effortDiv = document.createElement('div');
                effortDiv.classList.add('effort');
                effortDiv.innerHTML = `
                    <img src="${effort.image}" alt="${effort.name}" onclick="window.location.href='${effort.link}'">
                    <p>${effort.name}</p>
                `;
                container.appendChild(effortDiv);
            });
        }

        // Filter efforts based on search input and selected category
        function filterEfforts() {
            displayEfforts();
        }

        // Pagination logic to navigate between pages
        function navigate(direction) {
            currentPage += direction;
            if (currentPage < 1) currentPage = 1;
            const filteredEfforts = allEfforts.filter(effort => {
                const searchInput = document.getElementById('searchInput').value.toLowerCase();
                const selectedCategory = document.getElementById('categoryFilter').value;
                return effort.name.toLowerCase().includes(searchInput) && 
                       (!selectedCategory || effort.category === selectedCategory);
            });
            if (currentPage > Math.ceil(filteredEfforts.length / itemsPerPage)) currentPage = Math.ceil(filteredEfforts.length / itemsPerPage);
            displayEfforts();
        }

        // Initial display of efforts
        displayEfforts();

    </script>

</body>
</html>